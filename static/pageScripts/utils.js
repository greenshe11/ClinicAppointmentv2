
  // when adding symptom: recommendation, start at bottom to avoid messing with code name -> symptom conversion
export const mildSymptoms = {
    "Fever ( 37.8 C - 39 C)": "Stay hydrated and rest. Use light clothing. Consider over-the-counter medication like acetaminophen or ibuprofen for discomfort.",
    "Fever (39 C - 40 C)": "Stay hydrated and rest. Use light clothing. Consider over-the-counter medication like acetaminophen or ibuprofen for discomfort.",
    
    "Sweating (mild)": "Stay hydrated with water or clear broth. Avoid heavy clothing.",
    
    "Chills and shivering": "Use a light blanket and keep the room at a comfortable temperature.",
    "Headache": "Take over-the-counter pain relievers like acetaminophen or ibuprofen. Rest in a quiet, dim room.",
    "Muscle aches": "Rest and consider over-the-counter medications for relief.",
    "Loss of appetite": "Eat light, nutritious meals or soups if possible. Focus on hydration.",
    "Irritability": "Rest and keep stress levels low. Hydrate and avoid overstimulation.",
    "Dehydration": "Drink plenty of fluids such as water, broth, or electrolyte solutions.",
    "General weakness": "Rest and replenish with fluids and light meals.",
    "Fever (40 C)": "Stay hydrated and rest. Consider acetaminophen (Tylenol) for pain relief. Avoid ibuprofen and aspirin.",
    "Nausea": "Stay hydrated and avoid heavy meals. Take small sips of water or clear broth.",
    "Vomiting": "Rehydrate slowly with fluids. Seek medical attention if vomiting persists.",
    "Pain behind the eyes": "Rest in a dark, quiet room. Take acetaminophen for discomfort.",
    "Swollen glands": "Rest and stay hydrated. Consult a doctor if swelling worsens.",
    "Rash": "Avoid scratching and rest. Keep skin clean and dry.",
    "Joint pain or swelling": "Rest and take anti-inflammatory medication. Apply heat to swollen joints for relief.",
    "Pain in one joint that travels to another": "Monitor symptoms and take prescribed medication. Rest to prevent further discomfort.",
    "Chest pain": "Rest and consult your doctor for evaluation and treatment.",
    "Fatigue": "Rest and avoid overexertion until symptoms subside.",
    "Small, painless bumps beneath the skin": "Monitor the bumps and consult a doctor if they worsen or become painful.",
    "Flat or slightly raised, painless rash": "Keep skin clean and dry. Rest to aid recovery.",
    "Runny nose and nasal congestion": "Use antihistamines like Loratadine or nasal sprays like Flonase. Stay hydrated.",
    "Watery, itchy, red eyes": "Try OTC antihistamines like Zyrtec or Allegra. Avoid rubbing your eyes.",
    "Sneezing": "Antihistamines such as Claritin or Zyrtec may help reduce sneezing.",
    "Cough": "Use decongestants for nasal relief, and try a warm drink to soothe the throat.",
    "Itchy nose, roof of mouth or throat": "Use antihistamines or corticosteroid nasal sprays. Avoid irritants like smoke or dust.",
    "Postnasal drip": "Drink plenty of fluids and consider using a decongestant nasal spray like Afrin for short-term relief.",
    "Allergic shiners": "Treat the hay fever symptoms, especially congestion, with antihistamines or corticosteroid nasal sprays.",
    "Extreme tiredness and fatigue": "Rest as much as possible and ensure proper sleep hygiene. Treat symptoms to improve sleep quality.",
    "Pain, pressure and fullness in the cheeks, brow or forehead": "Apply warm compresses, use pain relievers and decongestants to relieve pressure.",
    "Worsening pain if you bend forward or lie down": "Use steam inhalation or saline sprays to help reduce congestion.",
    "Stuffy nose": "Try decongestants or saline sprays for relief.",
    "Achy feeling in the upper teeth": "Use pain relievers and decongestants to ease sinus pressure.",
    "Constant mild to moderate pressure and pain": "Use over-the-counter pain relievers such as acetaminophen, aspirin, or ibuprofen.",
    "Feeling like something is squeezing the sides of their heads together": "Try over-the-counter pain relief and rest. Practice relaxation techniques like meditation.",
    "Aching or tight neck muscles and shoulder muscles": "Consider using heat or cold packs on tight muscles and take pain relievers.",
    "Sensitivity to light and sound": "Rest in a quiet, dark room and use pain relievers if needed.",
    "Constipation": "Stay hydrated and include fiber-rich foods in your diet.",
    "Mood changes": "Track your mood changes and rest if necessary.",
    "Food cravings": "Keep a healthy snack nearby to satisfy cravings without overeating.",
    "Neck stiffness": "Apply heat to the neck or gently stretch to alleviate tension.",
    "Increased urination": "Stay hydrated and take frequent bathroom breaks.",
    "Fluid retention": "Limit salt intake and stay hydrated to reduce fluid retention.",
    "Frequent yawning": "Rest and monitor for other migraine symptoms.",
    "Visual phenomena": "Rest in a dark, quiet room to ease discomfort.",
    
    "Pins and needles sensations": "Stretch the affected area and rest.",
    "Weakness or numbness": "Monitor the symptoms, and consult a doctor if they persist.",
    "Difficulty speaking": "Rest and try to relax.",
    "Pain on one or both sides of your head": "Take over-the-counter pain relievers or prescribed medications.",
    "Pain that throbs or pulses": "Apply cold compresses and rest in a quiet, dark room.",
    "Sensitivity to light, sound, smell, or touch": "Avoid triggers, rest in a dark room, and wear earplugs if necessary.",
    "Nausea and vomiting": "Take anti-nausea medication if prescribed, and stay hydrated.",
    "Ear pain": "Use over-the-counter pain relievers like acetaminophen or ibuprofen.",
    "Trouble sleeping": "Elevate your head or your childâ€™s head while resting.",
    "Trouble hearing": "Use ear drops or consult a healthcare provider if hearing is severely affected.",
    "Feeling of fullness or pressure": "Use warm compresses to relieve pressure.",
    "Drainage from ear": "Consult a doctor immediately if there is discharge from the ear.",
    "Redness in one or both eyes": "Rest your eyes and avoid rubbing them.",
    "Itchiness in one or both eyes": "Apply cold compresses and avoid allergens.",
    "Gritty feeling in one or both eyes": "Use lubricating eye drops for relief.",
    "Discharge that forms a crust": "Gently clean your eyes with a warm, damp cloth in the morning.",
    "Tearing": "Use artificial tears and avoid eye strain.",
    "Photophobia ( sensitivity to light )": "Wear sunglasses and rest in dim lighting.",
    "Swelling of eyelid": "Apply warm compresses for 10-15 minutes several times a day.",
    "Discharge from eye": "Gently clean eyelid with a warm, damp cloth.",
    "Crusting along eyelid": "Use a mild baby shampoo to clean the eyelid if necessary.",
    "Light sensitivity": "Wear sunglasses and avoid bright lights.",
    "Soreness and itching": "Avoid touching the affected area; apply warm compresses.",
    "Eye tearing": "Use lubricating eye drops for relief.",
    "Scratchy feeling": "Avoid rubbing the eye and use sterile eye drops if needed.",
    "Runny or stuffy nose": "Use saline nasal sprays and decongestants for relief.",
    "Frequent throat clearing and sore throat": "Gargle with warm salt water or use throat lozenges.",
    "Wheezing and shortness of breath": "Consider inhaled medications like bronchodilators.",
    "Heartburn or sour taste": "Take acid blockers like antacids or proton pump inhibitors.",
    "Shortness of breath (dyspnea)": "Use inhalers or nebulizers to ease breathing.",
    "Tiredness ( fatigue )": "Rest and stay hydrated.",
    "Wheezing (whistling sound when breathing)": "Use a bronchodilator to help relax airway muscles.",
    "Fast heart rate (tachycardia)": "Rest and monitor your heart rate; see a doctor if symptoms worsen.",
    "Sneezing": "Use saline nasal sprays for relief.",
    "Body aches": "Pain relievers can help ease discomfort.",
    "Runny eyes": "Use antihistamines for relief.",
    "Hives or skin rash": "Use antihistamines for mild symptoms.",
    "Swelling of lips or eyelids": "Avoid allergenic foods and seek medical help.",
    "Itching mouth and throat": "Antihistamines can relieve itching.",
    "Cough, wheezing or shortness of breath": "Use a rescue inhaler if you have asthma.",
    "Abdominal pain, vomiting, diarrhea": "Consult a doctor if symptoms worsen.",
    "Lightheadedness or loss of consciousness": "Seek emergency assistance.",
    "Upset stomach": "Stay hydrated and consider light meals.",
    "Nasal congestion": "Use saline nasal sprays or decongestants.",
    "Runny nose": "Antihistamines can help.",
    "Cough": "Consider cough suppressants for relief.",
    "Sore throat": "Gargle with warm salt water.",
    "Nausea": "Stay hydrated and avoid heavy meals.",
    "Wheezing": "Use bronchodilators for shortness of breath.",
    "Rash": "Consult a doctor if it persists or worsens.",
    "Dizziness": "Rest and hydrate; consult a doctor if severe.",
    "Cold symptoms": "Rest and stay hydrated.",
    "Fatigue": "Rest and avoid overexertion.",
    "Chest tightness": "Consult a doctor if it worsens.",
    "Dry skin or rash": "Use moisturizer and consult a doctor for persistent symptoms.",
    "Skin irritation": "Avoid harsh soaps or chemicals.",
    "Numbness or tingling": "Rest and consult a doctor if it worsens.",
    "Sore muscles": "Rest and apply heat to sore areas.",
    "Difficulty concentrating": "Take regular breaks and stay hydrated.",
  };
  
  // when adding symptom: recommendation, start at bottom to avoid messing with code name -> symptom conversion
  export const heavySymptoms = {
    "Sweating (severe)": "Stay hydrated with water or clear broth. Avoid heavy clothing.",
    "Vision loss": "Seek medical advice if vision loss occurs.",
    "Fever (greater than 40 C)": "Stay hydrated and rest. Use light clothing. Consider over-the-counter medication like acetaminophen or ibuprofen for discomfort.",
    "Sweating": "Stay hydrated with water or clear broth. Avoid heavy clothing.",
    "Chills and shivering": "Use a light blanket and keep the room at a comfortable temperature.",
    "Mild headache": "Take over-the-counter pain relievers like acetaminophen or ibuprofen. Rest in a quiet, dim room.",
    "Muscle aches": "Rest and consider over-the-counter medications for relief.",
    "Loss of appetite": "Eat light, nutritious meals or soups if possible. Focus on hydration.",
    "Irritability": "Rest and keep stress levels low. Hydrate and avoid overstimulation.",
    "Dehydration": "Drink plenty of fluids such as water, broth, or electrolyte solutions.",
    "General weakness": "Rest and replenish with fluids and light meals.",
    "High fever (40 C or higher)": "Stay hydrated and rest. Consider acetaminophen (Tylenol) for pain relief. Avoid ibuprofen and aspirin.",
    "Nausea": "Stay hydrated and avoid heavy meals. Take small sips of water or clear broth.",
    "Persistent vomiting": "Rehydrate slowly with fluids. Seek medical attention if vomiting persists.",
    "Pain behind the eyes": "Rest in a dark, quiet room. Take acetaminophen for discomfort.",
    "Swollen glands": "Rest and stay hydrated. Consult a doctor if swelling worsens.",
    "Severe rash": "Avoid scratching and rest. Keep skin clean and dry.",
    "Persistent fever": "Take anti-inflammatory drugs like aspirin or naproxen, as directed by a healthcare provider.",
    "Joint pain or swelling": "Rest and take anti-inflammatory medication. Apply heat to swollen joints for relief.",
    "Migrating joint pain": "Monitor symptoms and take prescribed medication. Rest to prevent further discomfort.",
    "Chest pain": "Rest and consult your doctor for evaluation and treatment.",
    "Extreme fatigue": "Rest and avoid overexertion until symptoms subside.",
    "Small, painless bumps beneath the skin": "Monitor the bumps and consult a doctor if they worsen or become painful.",
    "Flat or slightly raised, painless rash": "Keep skin clean and dry. Rest to aid recovery.",
    "Runny nose and nasal congestion": "Use antihistamines like Loratadine or nasal sprays like Flonase. Stay hydrated.",
    "Watery, itchy, red eyes": "Try OTC antihistamines like Zyrtec or Allegra. Avoid rubbing your eyes.",
    "Sneezing": "Antihistamines such as Claritin or Zyrtec may help reduce sneezing.",
    "Cough": "Use decongestants for nasal relief, and try a warm drink to soothe the throat.",
    "Itchy nose, roof of mouth or throat": "Use antihistamines or corticosteroid nasal sprays. Avoid irritants like smoke or dust.",
    "Postnasal drip": "Drink plenty of fluids and consider using a decongestant nasal spray like Afrin for short-term relief.",
    "Allergic shiners": "Treat the hay fever symptoms, especially congestion, with antihistamines or corticosteroid nasal sprays.",
    "Extreme tiredness and fatigue": "Rest as much as possible and ensure proper sleep hygiene. Treat symptoms to improve sleep quality.",
    "Facial pressure and pain": "Apply warm compresses, use pain relievers and decongestants to relieve pressure.",
    "Worsening pain if you bend forward or lie down": "Use steam inhalation or saline sprays to help reduce congestion.",
    "Stuffy nose": "Try decongestants or saline sprays for relief.",
    "Achy feeling in the upper teeth": "Use pain relievers and decongestants to ease sinus pressure.",
    "Constant mild to moderate pressure and pain": "Use over-the-counter pain relievers such as acetaminophen, aspirin, or ibuprofen.",
    "Head squeezing sensation": "Try over-the-counter pain relief and rest. Practice relaxation techniques like meditation.",
    "Neck tension": "Consider using heat or cold packs on tight muscles and take pain relievers.",
    "Sensitivity to light and sound": "Rest in a quiet, dark room and use pain relievers if needed.",
    "Constipation": "Stay hydrated and include fiber-rich foods in your diet.",
    "Mood swings": "Track your mood changes and rest if necessary.",
    "Food cravings": "Keep a healthy snack nearby to satisfy cravings without overeating.",
    "Neck stiffness": "Apply heat to the neck or gently stretch to alleviate tension.",
    "Increased urination": "Stay hydrated and take frequent bathroom breaks.",
    "Fluid retention": "Limit salt intake and stay hydrated to reduce fluid retention.",
    "Frequent yawning": "Rest and monitor for other migraine symptoms.",
    "Visual phenomena": "Rest in a dark, quiet room to ease discomfort.",
    "Vision loss": "Seek medical advice if vision loss occurs.",
    "Pins and needles sensations": "Stretch the affected area and rest.",
    "Weakness or numbness": "Monitor the symptoms, and consult a doctor if they persist.",
    "Difficulty speaking": "Rest and try to relax.",
    "Unilateral head pain": "Take over-the-counter pain relievers or prescribed medications.",
    "Throbbing or pulsating pain": "Apply cold compresses and rest in a quiet, dark room.",
    "Sensitivity to various stimuli": "Avoid triggers, rest in a dark room, and wear earplugs if necessary.",
    "Nausea and vomiting": "Take anti-nausea medication if prescribed, and stay hydrated.",
    "Ear pain": "Use over-the-counter pain relievers like acetaminophen or ibuprofen.",
    "Difficulty sleeping": "Elevate your head while resting.",
    "Hearing difficulties": "Use ear drops or consult a healthcare provider if hearing is severely affected.",
    "Feeling of fullness or pressure in the ear": "Use warm compresses to relieve pressure.",
    "Ear drainage": "Consult a doctor immediately if there is discharge from the ear.",
    "Eye redness": "Rest your eyes and avoid rubbing them.",
    "Eye itchiness": "Apply cold compresses and avoid allergens.",
    "Gritty sensation in the eye": "Use lubricating eye drops for relief.",
    "Eye discharge": "Gently clean your eyes with a warm, damp cloth in the morning.",
    "Eye tearing": "Use artificial tears and avoid eye strain.",
    "Light sensitivity (photophobia)": "Wear sunglasses and rest in dim lighting.",
    "Eyelid swelling": "Apply warm compresses for 10-15 minutes several times a day.",
    "Eye discharge management": "Gently clean eyelid with a warm, damp cloth.",
    "Crusting along eyelid": "Use a mild baby shampoo to clean the eyelid if necessary.",
    "Soreness and itching": "Avoid touching the affected area; apply warm compresses.",
    "Scratchy feeling": "Avoid rubbing the eye and use sterile eye drops if needed.",
    "Persistent runny or stuffy nose": "Use saline nasal sprays and decongestants for relief.",
    "Frequent throat clearing and sore throat": "Gargle with warm salt water or use throat lozenges.",
    "Hoarseness": "Rest your voice and drink warm fluids.",
    "Wheezing and shortness of breath": "Consider inhaled medications like bronchodilators.",
    "Heartburn or sour taste": "Take acid blockers like antacids or proton pump inhibitors.",
    "Coughing up blood (rare)": "Seek immediate medical attention.",
    "Hoarse voice or difficulty swallowing": "Seek immediate medical attention if severe.",
    "Shortness of breath ( dyspnea )": "Use inhalers or nebulizers to ease breathing.",
    "Tiredness ( fatigue )": "Rest and stay hydrated.",
    "Wheezing (whistling sound when breathing)": "Use a bronchodilator to help relax airway muscles.",
    "Fast heart rate ( tachycardia )": "Rest and monitor your heart rate; see a doctor if symptoms worsen.",
    "Nasal congestion": "Use saline nasal sprays or decongestants.",
    "Digestive issues": "Stay hydrated and consider light meals.",
    "Upset stomach": "Stay hydrated and consider light meals.",
    "Lightheadedness or loss of consciousness": "Seek emergency assistance.",
    "Cold symptoms": "Rest and stay hydrated.",
    "Dizziness": "Rest and hydrate; consult a doctor if severe.",
    "Dry skin or rash": "Use moisturizer and consult a doctor for persistent symptoms.",
    "Skin irritation": "Avoid harsh soaps or chemicals.",
    "Numbness or tingling": "Rest and consult a doctor if it worsens.",
    "Sore muscles": "Rest and apply heat to sore areas.",
    "Difficulty concentrating": "Take regular breaks and stay hydrated."
  };

const getKeyInitial = (array, index) => {
    const key = Object.keys(array)[index]
    const first = key.split('(')[0]
    return first
}

export const mildSymptomsKeysInitial = () => {
    const list = []
    for (let i=0; i<Object.keys(mildSymptoms).length; i++){
        list.push(getKeyInitial(mildSymptoms, i))
    }
    return list
}

export const heavySymptomsKeysInitial = () => {
    const list = []
    for (let i=0; i<Object.keys(heavySymptoms).length; i++){
        list.push(getKeyInitial(heavySymptoms, i))
    }
    return list
}
const getLevels = (array, severity) => {
    const pairs = {}
    let symptomsInitialKeys = []
    if (severity=='mild'){
        symptomsInitialKeys = mildSymptomsKeysInitial()
    }else{
        symptomsInitialKeys = heavySymptomsKeysInitial()
    }

    const getLevelName = (name) => {
        const res =  name.match(/\(([^)]+)\)/g)
        return res?res[0]:''
    }

    for (let index in symptomsInitialKeys){
        pairs[symptomsInitialKeys[index]] = []
        for (let key in array){
            if (symptomsInitialKeys[index] == key.split('(')[0]){
                pairs[symptomsInitialKeys[index]].push(getLevelName(key))
                
            }
        }
    }
    return pairs

}

export const mildSymptomsLevels = getLevels(mildSymptoms, 'mild')
export const heavySymptomsLevels = getLevels(heavySymptoms, 'heavy')



const getSymptomCodes = ()=>{
    const tempList = {}
    for (let i=0; i<Object.keys(mildSymptoms).length; i++){
        tempList[`a${i}`] = Object.keys(mildSymptoms)[i]
    }
    for (let i=0; i<Object.keys(heavySymptoms).length; i++){
        tempList[`b${i}`] = Object.keys(heavySymptoms)[i]
    }
    tempList['o'] = '... others'
    console.log('templist',tempList)
    return tempList
}

export const symptomCodes = getSymptomCodes()

export const getSymptomFromCode = (code) => {
    
    const isNotOther = Object.keys(symptomCodes).includes(code)
    if (isNotOther){
        return symptomCodes[code]
    }else{
        return '... others'
    }
}

export const getSymptomsFromStringArray = (string) => {
    const arr = string.split(','); // Split the input string into an array
    const res = arr.map((value) => { // Use map to transform each value
        return getSymptomFromCode(value.trim()); // Call the function and trim whitespace
    });
    return res; // Return the resulting array
};

// Function to get a recommendation based on a symptom input
export const getRecommendation = (symptom) => {
    // Check if the symptom exists as a key in the mildSymptoms object
    if (Object.keys(mildSymptoms).includes(symptom)) { 
        return mildSymptoms[symptom]; // Return the corresponding recommendation from mildSymptoms
    // Check if the symptom exists as a key in the heavySymptoms object
    } else if (Object.keys(heavySymptoms).includes(symptom)) { 
        return heavySymptoms[symptom]; // Return the corresponding recommendation from heavySymptoms
    } else {
        return false; // If the symptom is not found in either object, return false
    }
};  

/**
 * Converts an array of symptom codes into an array of corresponding symptom descriptions.
 * 
 * @param {Array} arr - An array of symptom codes that need to be converted.
 * 
 * @returns {Array} - An array of symptom descriptions corresponding to the input codes.
 * 
 * Example usage:
 * const symptomCodes = ['C1', 'C2', 'C3'];
 * const symptoms = getSymptomsFromCodeArray(symptomCodes);
 * console.log(symptoms); // ['Headache', 'Fever', 'Cough']
 */
export const getSymptomsFromCodeArray = (arr) => {
    const temp = []
    console.log(arr)
    for (let i = 0; i < arr.length; i++) {
        const code = arr[i]
        temp.push(getSymptomFromCode(code))
    }
    console.log(temp)
    return temp
}


// Function to create a recommendation sentence from an array of symptoms
export const createRecommendationSent = (symptomArray) => {
    let sentence = ''; // Initialize an empty string to hold the final recommendation sentence
    for (let i = 0; i < symptomArray.length; i++) { // Loop through each symptom in the symptomArray
        let symptom = symptomArray[i]; // Get the current symptom from the array
        let temp = ''; // Initialize a temporary string to hold the recommendation for the current symptom
        let recommendation = getRecommendation(symptom); // Get the recommendation for the current symptom
        if (recommendation) { // If a recommendation exists
            recommendation = recommendation
            temp = `For <u>${symptomArray[i]}</u>: <br>${recommendation} <br><br>`; // Format it and append it to the temp string
        }
        sentence = sentence + temp; // Append the temp string to the final sentence
    }
    return '<br>'+sentence; // Return the complete recommendation sentence
};

// Function to determine if a symptom is serious based on its presence in symptom categories
export const isSeriousSymptom = (symptom) => {
    // Check if the symptom exists as a key in the mildSymptoms object
    if (Object.keys(mildSymptoms).includes(symptom)) { 
        return false; // Return false if the symptom is classified as mild
    // Check if the symptom exists as a key in the heavySymptoms object
    } else if (Object.keys(heavySymptoms).includes(symptom)) { 
        return true; // Return true if the symptom is classified as heavy
    } else {
        return true; // If the symptom is not found in either object, assume it is serious and return true
    }
};

export const getSeriousSymptoms = (symptoms) => {
    console.log(symptoms)
    const serious = []
    for (let i=0; i<symptoms.length; i++){
        if (isSeriousSymptom(symptoms[i])){
            serious.push(symptoms[i])
        }else{
            continue
        }
    }
    return serious
}

export const getCodeFromSymptom = (symptom) => {
    console.log(symptomCodes)

    for (let code in symptomCodes) {
       
        if (symptomCodes[code] == symptom){
            return code
        }
    }
}

export const getCodesFromSymptomsArray = (symptoms) => {
    const temp = []
    for (let i=0; i<symptoms.length; i++){
        const symptom = symptoms[i]
        console.log("SYMPTOM:", symptom)
        const code = getCodeFromSymptom(symptom)
        console.log(code)
        temp.push(code)
    }
    return temp
}


export const sendMessage = async (date, time, contact, statusCode) => {
    const url = '/api/sms'
    const data = {date, time, contact, statusCode}
    try {
        const response = await fetch(url, {
            method: 'POST', // Specify the PUT method
            headers: {
                'Content-Type': 'application/json' // Specify content type for JSON data
            },
            body: JSON.stringify(data) // Convert data object to a JSON string
        });

        if (!response.ok) {
            throw new Error(`HTTP error! status: ${response.status}`);
        }

        const result = await response.json(); // Parse the JSON response
        console.log(result)
    } catch (error) {
        console.error('Error:', error);
    }
}